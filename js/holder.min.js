var Holder=Holder||{};(function(t,e){function i(t,e){var i="complete",o="readystatechange",n=!1,s=n,a=!0,r=t.document,l=r.documentElement,h=r.addEventListener?"addEventListener":"attachEvent",d=r.addEventListener?"removeEventListener":"detachEvent",c=r.addEventListener?"":"on",p=function(a){(a.type!=o||r.readyState==i)&&(("load"==a.type?t:r)[d](c+a.type,p,n),!s&&(s=!0)&&e.call(t,null))},f=function(){try{l.doScroll("left")}catch(t){return setTimeout(f,50),void 0}p("poll")};if(r.readyState==i)e.call(t,"lazy");else{if(r.createEventObject&&l.doScroll){try{a=!t.frameElement}catch(u){}a&&f()}r[h](c+"DOMContentLoaded",p,n),r[h](c+o,p,n),t[h](c+"load",p,n)}}function o(t){t=t.match(/^(\W)?(.*)/);var e=document["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")](t[2]),i=[];return null!==e&&(i=e.length?e:0===e.length?e:[e]),i}function n(t,e){var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);return i}function s(t,e,i){e=parseInt(e,10),t=parseInt(t,10);var o=Math.max(e,t),n=Math.min(e,t),s=1/12,a=Math.min(.75*n,.75*o*s);return{height:Math.round(Math.max(i.size,a))}}function a(t){var e=t.ctx,i=t.dimensions,o=t.template,n=t.ratio,a=t.holder,r="literal"==a.textmode,l="exact"==a.textmode,h=s(i.width,i.height,o),d=h.height,c=i.width*n,p=i.height*n,u=o.font?o.font:"sans-serif";f.width=c,f.height=p,e.textAlign="center",e.textBaseline="middle",e.fillStyle=o.background,e.fillRect(0,0,c,p),e.fillStyle=o.foreground,e.font="bold "+d+"px "+u;var m=o.text?o.text:Math.floor(i.width)+"x"+Math.floor(i.height);if(r){var i=a.dimensions;m=i.width+"x"+i.height}else if(l&&a.exact_dimensions){var i=a.exact_dimensions;m=Math.floor(i.width)+"x"+Math.floor(i.height)}var g=e.measureText(m).width;return g/c>=.75&&(d=Math.floor(.75*d*(c/g))),e.font="bold "+d*n+"px "+u,e.fillText(m,c/2,p/2,c),f.toDataURL("image/png")}function r(t,e,i,o){var s=i.dimensions,r=i.theme,l=i.text?decodeURIComponent(i.text):i.text,d=s.width+"x"+s.height;r=l?n(r,{text:l}):r,r=i.font?n(r,{font:i.font}):r,e.setAttribute("data-src",o),i.theme=r,e.holder_data=i,"image"==t?(e.setAttribute("alt",l?l:r.text?r.text+" ["+d+"]":d),(p||!i.auto)&&(e.style.width=s.width+"px",e.style.height=s.height+"px"),p?e.style.backgroundColor=r.background:(e.setAttribute("src",a({ctx:v,dimensions:s,template:r,ratio:y,holder:i})),i.textmode&&"exact"==i.textmode&&(g.push(e),h(e)))):"background"==t?p||(e.style.backgroundImage="url("+a({ctx:v,dimensions:s,template:r,ratio:y,holder:i})+")",e.style.backgroundSize=s.width+"px "+s.height+"px"):"fluid"==t&&(e.setAttribute("alt",l?l:r.text?r.text+" ["+d+"]":d),e.style.height="%"==s.height.slice(-1)?s.height:s.height+"px",e.style.width="%"==s.width.slice(-1)?s.width:s.width+"px",("inline"==e.style.display||""===e.style.display||"none"==e.style.display)&&(e.style.display="block"),p?e.style.backgroundColor=r.background:(g.push(e),h(e)))}function l(t,e){var i={height:t.clientHeight,width:t.clientWidth};if(!i.height&&!i.width){if(t.hasAttribute("data-holder-invisible"))throw Error("Holder: placeholder is not visible");return t.setAttribute("data-holder-invisible",!0),setTimeout(function(){e.call(this,t)},1),null}return t.removeAttribute("data-holder-invisible"),i}function h(t){var e;e=null==t.nodeType?g:[t];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(o.holder_data){var n=o.holder_data,s=l(o,h);s&&(n.fluid&&o.setAttribute("src",a({ctx:v,dimensions:s,template:n.theme,ratio:y,holder:n})),n.textmode&&"exact"==n.textmode&&(n.exact_dimensions=s,o.setAttribute("src",a({ctx:v,dimensions:n.dimensions,template:n.theme,ratio:y,holder:n}))))}}}function d(e,i){var o={theme:n(b.themes.gray,{})},s=!1;for(sl=e.length,j=0;sl>j;j++){var a=e[j];t.flags.dimensions.match(a)?(s=!0,o.dimensions=t.flags.dimensions.output(a)):t.flags.fluid.match(a)?(s=!0,o.dimensions=t.flags.fluid.output(a),o.fluid=!0):t.flags.textmode.match(a)?o.textmode=t.flags.textmode.output(a):t.flags.colors.match(a)?o.theme=t.flags.colors.output(a):i.themes[a]?i.themes.hasOwnProperty(a)&&(o.theme=n(i.themes[a],{})):t.flags.font.match(a)?o.font=t.flags.font.output(a):t.flags.auto.match(a)?o.auto=!0:t.flags.text.match(a)&&(o.text=t.flags.text.output(a))}return s?o:!1}var c=!1,p=!1,f=document.createElement("canvas"),u=1,m=1,g=[];if(f.getContext)if(0>f.toDataURL("image/png").indexOf("data:image/png"))p=!0;else var v=f.getContext("2d");else p=!0;p||(u=window.devicePixelRatio||1,m=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||v.oBackingStorePixelRatio||v.backingStorePixelRatio||1);var y=u/m,b={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}},stylesheet:""};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:b.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(t){return this.regex.exec(t)[1]}}},document.getElementsByClassName||(document.getElementsByClassName=function(t){var e,i,o,n=document,s=[];if(n.querySelectorAll)return n.querySelectorAll("."+t);if(n.evaluate)for(i=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=n.evaluate(i,n,null,0,null);o=e.iterateNext();)s.push(o);else for(e=n.getElementsByTagName("*"),i=RegExp("(^|\\s)"+t+"(\\s|$)"),o=0;e.length>o;o++)i.test(e[o].className)&&s.push(e[o]);return s}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])});for(var w in t.flags)t.flags.hasOwnProperty(w)&&(t.flags[w].match=function(t){return t.match(this.regex)});t.add_theme=function(e,i){return null!=e&&null!=i&&(b.themes[e]=i),t},t.add_image=function(e,i){var n=o(i);if(n.length)for(var s=0,a=n.length;a>s;s++){var r=document.createElement("img");r.setAttribute("data-src",e),n[s].appendChild(r)}return t},t.run=function(e){c=!0;var i=n(b,e),s=[],a=[],l=[];for("string"==typeof i.images?a=o(i.images):window.NodeList&&i.images instanceof window.NodeList?a=i.images:window.Node&&i.images instanceof window.Node&&(a=[i.images]),"string"==typeof i.bgnodes?l=o(i.bgnodes):window.NodeList&&i.elements instanceof window.NodeList?l=i.bgnodes:window.Node&&i.bgnodes instanceof window.Node&&(l=[i.bgnodes]),u=0,f=a.length;f>u;u++)s.push(a[u]);var h=document.getElementById("holderjs-style");h||(h=document.createElement("style"),h.setAttribute("id","holderjs-style"),h.type="text/css",document.getElementsByTagName("head")[0].appendChild(h)),i.nocss||(h.styleSheet?h.styleSheet.cssText+=i.stylesheet:h.appendChild(document.createTextNode(i.stylesheet)));for(var p=RegExp(i.domain+'/(.*?)"?\\)'),f=l.length,u=0;f>u;u++){var m=window.getComputedStyle(l[u],null).getPropertyValue("background-image"),g=m.match(p),v=l[u].getAttribute("data-background-src");if(g){var y=d(g[1].split("/"),i);y&&r("background",l[u],y,m)}else if(null!=v){var y=d(v.substr(v.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i);y&&r("background",l[u],y,m)}}for(f=s.length,u=0;f>u;u++){var w,x;x=w=m=null;try{x=s[u].getAttribute("src"),attr_datasrc=s[u].getAttribute("data-src")}catch($){}if(null==attr_datasrc&&x&&x.indexOf(i.domain)>=0?m=x:attr_datasrc&&attr_datasrc.indexOf(i.domain)>=0&&(m=attr_datasrc),m){var y=d(m.substr(m.lastIndexOf(i.domain)+i.domain.length+1).split("/"),i);y&&(y.fluid?r("fluid",s[u],y,m):r("image",s[u],y,m))}}return t},i(e,function(){window.addEventListener?(window.addEventListener("resize",h,!1),window.addEventListener("orientationchange",h,!1)):window.attachEvent("onresize",h),c||t.run()}),"function"==typeof define&&define.amd&&define([],function(){return t})})(Holder,window);